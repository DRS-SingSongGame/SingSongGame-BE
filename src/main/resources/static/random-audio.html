<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸµ ëœë¤ ìŒì•… ì¬ìƒ</title>
</head>
<body>
<h2>ğŸ¶ ëœë¤ ê³¡ ì¬ìƒ í…ŒìŠ¤íŠ¸</h2>

<button onclick="fetchRandomSong()">ëœë¤ ê³¡ ê°€ì ¸ì˜¤ê¸°</button>

<p id="song-info">ê³¡ ì •ë³´ ì—†ìŒ</p>

<audio id="audio-player" controls autoplay>
  <source id="audio-source" src="" type="audio/mpeg">
  ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
</audio>

<script>
  async function fetchRandomSong() {
    try {
      const response = await fetch('http://localhost:8080/api/song/random');
      const data = await response.json();

      // ê³¡ ì •ë³´ ì¶œë ¥
      document.getElementById('song-info').innerText =
              `ğŸµ ${data.title} - ${data.artist}`;

      // ì˜¤ë””ì˜¤ URL ì£¼ì…
      const audio = document.getElementById('audio-player');
      const source = document.getElementById('audio-source');
      source.src = data.audioUrl;
      audio.load(); // íƒœê·¸ì— source ê°±ì‹  í›„ í•„ìˆ˜
      audio.play();
    } catch (err) {
      console.error('ê³¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', err);
      alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  }
</script>
</body>
</html>
